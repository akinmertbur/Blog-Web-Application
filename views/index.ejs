<%- include('partials/header.ejs') %>

<div class="blog-create gap-block">
  <form action="/create" method="POST">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" placeholder="Title" />
    <label for="content">Content:</label>
    <textarea
      id="content"
      name="content"
      placeholder="Write your blog post here"
    ></textarea>
    <input type="submit" value="Publish" />
  </form>
</div>
<% if (locals.posts) { %>
<div>
  <h2 class="blog-create blog-title">Blog Posts</h2>
</div>
<div class="blog-create">
  <% for( let i = 0; i < posts.length; i++ ) { %>
  <div class="blog-post">
    <h3><%= posts[i].title %></h3>
    <p><%= posts[i].content %></p>
    <div class="button-container">
      <div class="edit-button-container">
        <a
          class="edit-button button-link-edit"
          href="/edit/<%= encodeURIComponent(posts[i].title) %>"
          >Edit</a
        >
      </div>
      <div class="delete-button-container">
        <form
          action="/delete/<%= encodeURIComponent(posts[i].title) %>"
          method="POST"
        >
          <input type="hidden" name="_method" value="DELETE" />
          <input class="delete-button" type="submit" value="Delete" />
        </form>
      </div>
    </div>
  </div>

  <% } %> <% } %>
</div>
<%- include('partials/footer.ejs') %>
