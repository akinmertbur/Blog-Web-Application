<%- include('partials/header.ejs') %>

<h1>Welcome to Blog App</h1>

<form action="/create" method="POST">
  <input type="text" name="title" placeholder="Title" />
  <textarea name="content" placeholder="Write your blog post here"></textarea>
  <input type="submit" value="Publish" />
</form>

<form action="/view" method="get"><input type="submit" value="View" /></form>
<% if (locals.posts) { %> <% for( let i = 0; i < posts.length; i++ ) { %>
<h3><%= posts[i].title %></h3>
<p><%= posts[i].content %></p>
<% } %>

<ul>
  <% posts.forEach((post) => { %>
  <li>
    <a href="/edit/<%= encodeURIComponent(post.title) %>"
      >Edit <%= post.title %></a
    >
    <form action="/delete/<%= encodeURIComponent(post.title) %>" method="POST">
      <input type="hidden" name="_method" value="DELETE" />
      <input type="submit" value="Delete <%= post.title %>" />
    </form>
  </li>
  <% }); %>
</ul>

<% } %> <%- include('partials/footer.ejs') %>
